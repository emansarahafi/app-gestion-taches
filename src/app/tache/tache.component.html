<div class="task-header">
  <h2>📋 Liste des tâches</h2>
  <div class="task-actions-header">
    <button class="toggle-form-btn" (click)="afficherFormulaire = !afficherFormulaire">
      {{ afficherFormulaire ? '❌ Masquer' : '➕ Ajouter une tâche' }}
    </button>
  </div>
</div>

<div class="quick-add-form" *ngIf="afficherFormulaire">
  <app-ajout-tache></app-ajout-tache>
</div>

<div class="task-stats" *ngIf="tasks.length > 0">
  <div class="stat-card">
    <span class="stat-number">{{ getTotalTasks() }}</span>
    <span class="stat-label">Total</span>
  </div>
  <div class="stat-card">
    <span class="stat-number">{{ getCompletedTasks() }}</span>
    <span class="stat-label">Terminées</span>
  </div>
  <div class="stat-card">
    <span class="stat-number">{{ getPendingTasks() }}</span>
    <span class="stat-label">En cours</span>
  </div>
</div>

<div *ngIf="tasks.length === 0" class="no-tasks">
  <div class="no-tasks-icon">📝</div>
  <p>Aucune tâche trouvée pour le moment.</p>
  <button class="toggle-form-btn" (click)="afficherFormulaire = !afficherFormulaire">
    {{ afficherFormulaire ? '❌ Masquer' : '➕ Créer votre première tâche' }}
  </button>
</div>

<ul *ngIf="tasks.length > 0" class="task-list">
  <li *ngFor="let t of tasks; trackBy: trackByTaskId" 
      class="task-item" 
      [class.completed]="t.termine">
    <div class="task-content">
      <span class="task-text">{{ t.titre }}</span>
      <div class="task-status">
        <span class="status-icon" [ngSwitch]="t.statut">
          <span *ngSwitchCase="'terminee'">✔️</span>
          <span *ngSwitchCase="'en_attente'">⏳</span>
          <span *ngSwitchDefault>❓</span>
        </span>
      </div>
    </div>
    <div class="task-actions">
      <button (click)="supprimer(t.id)" class="delete-btn" title="Supprimer la tâche">
        🗑
      </button>
    </div>
  </li>
</ul>
